"use strict";const searchText=document.querySelector(".js-input-search"),btnSearch=document.querySelector(".js-btn-search"),btnReset=document.querySelector(".js-btn-reset"),showContainer=document.querySelector(".js-list-all"),favContainer=document.querySelector(".js-list-favorites"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let showList=[],favShowList=[];const favShowsLS=JSON.parse(localStorage.getItem("favShows"));function renderShow(e,t){let s="",n="";n=e.show.image&&e.show.image.medium?e.show.image.medium:defaultImage;const o=t?"":"hidden";return s+=`<li class="fav-list all-list js-list-each" id="${e.show.id}">\n  <img class="fav-list__img all-list__img" src="${n}" alt="${e.show.name}"/>  <div class="fav-list__div all-list__div"><p class="fav-div-text all-div-text">${e.show.name}</p>\n  <i class="fav-div-icon fa-solid fa-trash js-icon-trash ${o}"></i></div>\n  </li>`,s}function renderShows(e){showContainer.innerHTML="";for(const t of e){const e=renderShow(t,!1);showContainer.innerHTML+=e}addEventFav()}function renderFavShows(e){favContainer.innerHTML="";for(const t of e){const e=renderShow(t,!0);favContainer.innerHTML+=e}addEventFav()}function handleClickFavorite(e){e.preventDefault();const t=parseInt(e.currentTarget.id),s=showList.find(e=>e.show.id===t),n=favShowList.findIndex(e=>e.show.id===t);-1===n?(favShowList.push(s),e.currentTarget.classList.add("chosen")):(favShowList.splice(n,1),e.currentTarget.classList.remove("chosen")),localStorage.setItem("favShows",JSON.stringify(favShowList)),renderFavShows(favShowList);const o=document.getElementById(t);o&&o.classList.remove("chosen")}function addEventFav(){const e=document.querySelectorAll(".js-list-each");for(const t of e)t.addEventListener("click",handleClickFavorite)}function handleClickSearch(e){e.preventDefault();const t=searchText.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{showList=e;renderShows(showList.filter(e=>e.show.name.toLowerCase().includes(t.toLowerCase())))}).catch(e=>console.error("Error fetching data:",e))}function handleClickResetBtn(e){e.preventDefault(),localStorage.removeItem("favShows"),favShowList=[],showList=[],renderFavShows(favShowList),renderShows(showList),addEventFav()}null!==favShowsLS&&(favShowList=favShowsLS,renderFavShows(favShowList)),btnSearch.addEventListener("click",handleClickSearch),btnReset.addEventListener("click",handleClickResetBtn);